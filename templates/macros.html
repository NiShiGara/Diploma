<!DOCTYPE html>

{% macro render_menu(user_role) %}
<div class=menu>
    <ul>
        <li class=active><a href={{url_for("catalog")}}>Каталог</a></li>
        <li><a>Список избранного</a></li>
        {% if user_role == 'guest' %}
        <form action="" method="get">
            <input type="submit" name="authorization_button" value="Войти"
                   style="background:#fc6c85; color: #fff0f5; height:100%; border: none;">
        </form>
        {% else %}
        {% if user_role == 'admin' %}
        <li class=active><a href={{ url_for("admin_profile")}}>Личный кабинет</a></li>
        {% else %}
        <li class=active><a href={{ url_for("user_profile")}}>Личный кабинет</a></li>
        {% endif %}
        {% endif %}
    </ul>
</div>
{% endmacro %}
<!--Авторизация пользователя-->
<!--поле для заполнения (логин, пароль и т.д.)-->
{% macro render_field(field) %}
{{ field.label }}
{{ field(**kwargs)|safe }}
{% endmacro %}

<!--окно авторизации-->
{% macro authorization(user_data_error,auth_form) %}

<div class="gray_page">
</div>
<div class="authorization_registration">
    <input type="submit" value="Выйти" onclick="location.href='/';" style="width:12%; height:10%;">
    Войдите в аккаунт:
    <form action="" method="get">
        {{ render_field(auth_form.auth_login) }}
        <br>
        {{ render_field(auth_form.auth_password) }}
        <br>
        {% if user_data_error != "" %}
        {{user_data_error}}
        {% endif %}
        <br>
        <input type="submit" value="Авторизоваться" name="authorization_user_button"
               style="width:70%; height:20%; margin-top:20%;">
    </form>
    <form action="" method="get">
        <input type="submit" value="Создать аккаунт" name="registration_button"
               style="width:70%; height:100%;margin-top:5%;">
    </form>
</div>
{% endmacro %}

<!--Регистрация пользователя-->
{% macro registration(user_data_error, reg_form) %}
<div class="gray_page">
</div>
<div class="authorization_registration">
    <input type="submit" value="Выйти" onclick="location.href='/';" style="width:12%; height:10%;">
    Создайте аккаунт:
    <form action="" method="get">
        {{ render_field(reg_form.reg_login) }}
        <br>
        {{ render_field(reg_form.reg_password) }}
        <br>
        {{ render_field(reg_form.password_confirm) }}
        <br>
        {% if user_data_error != "" %}
        {{user_data_error}}
        {% endif %}
        <br>
        <input type="submit" value="Зарегистрироваться" name="registration_user_button"
               style="width:70%; height:20%; margin-top:20%;">
    </form>
    <form action="" method="get">
        <input type="submit" value="Уже есть аккаунт" name="authorization_button"
               style="width:70%; height:100%;margin-top:5%;">
    </form>
</div>
{% endmacro %}

<!--Генерация формы выбора категории-->
{% macro render_block_choice(category, choice_category, choice_complexity, len, str) %}
<p><b>Категории:</b></p>
{% for i in range(len(category)) %}
<p>
    {% set value=category.loc[i, "category_name"] %}
    {% if value in choice_category %}
    <input type="checkbox" name="category" value="{{ value }}" checked>
    {% else %}
    <input type="checkbox" name="category" value="{{ value }}">
    {% endif %}
    {{ value }}
</p>
{% endfor %}

<p><b>Сложность:</b></p>
{% for i in range(5) %}
<p>
    <input type="checkbox" name="complexity" value="{{ i + 1 }}"
           {% if str(i + 1) in choice_complexity %} checked {% endif %}>
    {% for j in range(i + 1) %}
    <img src="/static/image/icons/shaded_star_icon.png" alt="" width="18px" height="18px">
    {% endfor %}

    {% for j in range(5 - (i + 1)) %}
    <img src="/static/image/icons/empty_star_icon.png" alt="" width="18px" height="18px">
    {% endfor %}
</p>
{% endfor %}
{% endmacro %}

<!--Макрос для вывода выкроек-->
{% macro render_pattern(pattern, len) %}
{% for i in range(len(pattern)) %}
<div class="block">
    <div class="data">
        {% for name in pattern.dtypes.index %}
        {% if name != "ID" %}
        <p>
            <b>{{ name }}:</b>
            {% set value=pattern.loc[i, name] %}
            {% if name != "Сложность" %}
            {{ value }}

            {% else %}
            {% for i in range(value) %}
            <img src="/static/image/icons/shaded_star_icon.png" alt="" width="18px" height="18px">
            {% endfor %}

            {% for j in range(5 - value) %}
            <img src="/static/image/icons/empty_star_icon.png" alt="" width="18px" height="18px">
            {% endfor %}

            {% endif %}

            {% endif %}
            {% endfor %}
        </p>

        <p>
            <input type="radio" name="pattern" value="{{ pattern.loc[i, 'ID'] }}"
                   {% if pattern.loc[i, 'ID'] == pattern.values[0][0] %} checked {% endif %}> Выбрать для построения
            <input type="radio" name="pattern" value="{{ pattern.loc[i, 'ID'] }}"> Добавить в избранное
        </p>
    </div>
</div>
{% endfor %}
{% endmacro %}

<!--кнопка выход-->
{% macro exit() %}
<form action={{url_for('catalog')}} method="get">
    <input type="submit" name="exit_button" value="Выйти"
           style="background:#fc6c85; color: #fff0f5; height:100%; border: none;">
</form>
{% endmacro %}